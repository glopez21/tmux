#---------------------------------------------------------------------
# Reloading the conf
#---------------------------------------------------------------------
unbind r
bind r source-file ~/.config/tmux/tmux.conf
# display-message "Config reloaded..."

#---------------------------------------------------------------------
# Options
#---------------------------------------------------------------------

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

set -g mouse on # Allowing mouse support
set-option -g status-position top # Set status bar on top
# set -g default-shell /bin/zsh
set -g repeat-time 1000 

# set -g default-terminal "tmux-256color"
set-option -g default-terminal 'screen-256color'
set-option -g terminal-overrides ',xterm-256color:RGB'


#---------------------------------------------------------------------
# Setting key-binbings
#---------------------------------------------------------------------

unbind C-b
set -g prefix C-Space # Set Prefix
bind C-Space send-prefix #


# Shift arrow to switch windows
bind -n S-Left  previous-window
bind -n S-Right next-window

# Shift Alt vim keys to switch windows
bind -n M-H previous-window
bind -n M-L next-window

# bind-key h select-pane -L
# bind-key j select-pane -D
# bind-key k select-pane -U
# bind-key l select-pane -R

# split pane bindings
bind '-' split-window -v -c "#{pane_current_path}"
bind '|' split-window -h -c "#{pane_current_path}"
bind n new-window -c "#{pane_current_path}"

#---------------------------------------------------------------------
# Setting the Theme
#---------------------------------------------------------------------
# tokyo-night Theme Plugin settings
# set -g @plugin "janoamaral/tokyo-night-tmux"

# # TokyoNight colors for Tmux
# set -g @tokyo-night-tmux_show_datetime 0
# set -g @tokyo-night-tmux_date_format MDY
# set -g @tokyo-night-tmux_time_format 24H

# set -g @tokyo-night-tmux_show_netspeed 1
# # set -g @tokyo-night-tmux_show_hostname 1
# set -g @tokyo-night-tmux_netspeed_iface "eth0" # Detected via default route
# set -g @tokyo-night-tmux_netspeed_showip 1      # Display IPv4 address (default 0)

# set -g @tokyo-night-tmux_show_battery_widget 1
# set -g @tokyo-night-tmux_battery_name "BAT1"  # some linux distro have 'BAT0'
# set -g @tokyo-night-tmux_battery_low_threshold 21 # default


# set -g @tokyo-night-tmux_show_path 1
# set -g @tokyo-night-tmux_path_format relative
# set -g @tokyo-night-tmux_window_id_style dsquare
# set -g @tokyo-night-tmux_window_id_style dsquare
# set -g @tokyo-night-tmux_show_git 0





#---------------------------------------------------------------------
# Floating pane settings
#---------------------------------------------------------------------

# Setting the main key to toggle the floating pane on and off
set -g @floax-bind '-n M-p'

# When the pane is toggled, using this bind pops a menu with additional options
# such as resize, fullscreen, resetting to defaults and more.
set -g @floax-bind-menu 'P'

# The default width and height of the floating pane
set -g @floax-width '80%'
set -g @floax-height '80%'

# The border color can be changed, these are the colors supported by Tmux:
# black, red, green, yellow, blue, magenta, cyan, white for the standard
# terminal colors; brightred, brightyellow and so on for the bright variants;
# colour0/color0 to colour255/color255 for the colors from the 256-color
# palette; default for the default color; or a hexadecimal RGB color such as #882244.
set -g @floax-border-color 'red'

# The text color can also be changed, by default it's blue 
# to distinguish from the main window
# Optional colors are as shown above in @floax-border-color
set -g @floax-text-color 'blue'

# By default when floax sees a change in session path 
# it'll change the floating pane's path to disable this
# set it to false. You could also "cd -" when the pane is toggled to go back
set -g @floax-change-path 'true'

# The default session name of the floating pane is 'scratch'
# You can modify the session name with this option:
# set -g @floax-session-name 'some-other-session-name'

# Change the title of the floating window
set -g @floax-title 'floax'



set -g detach-on-destroy off     # don't exit from tmux when closing a session
set -g escape-time 0             # zero-out escape time delay
set -g history-limit 1000000     # increase history size (from 2,000)
set -g renumber-windows on       # renumber all windows when any window is closed
set -g set-clipboard on          # use system clipboard

set -g default-terminal "${TERM}"
setw -g mode-keys vi
set -g pane-active-border-style 'fg=magenta,bg=default'
set -g pane-border-style 'fg=brightblack,bg=default'

set -g @fzf-url-fzf-options '-p 60%,30% --prompt="   " --border-label=" Open URL "'
set -g @fzf-url-history-limit '2000'




#---------------------------------------------------------------------
# plugins
#---------------------------------------------------------------------
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect' # saves all the little details from your tmux environment to be restored restart
set -g @plugin 'tmux-plugins/tmux-continuum' # Allows for  continuous saving of tmux environment
set -g @plugin 'jimeh/tmuxifier' # Create, edit, manage and load complex Tmux session, window and pane configurations with ease.
set -g @plugin 'omerxx/tmux-floax' # Allows for a 'floating' pane to be accessed
set -g @plugin 'omerxx/tmux-sessionx' # Allows for the management of sessions easily
set -g @plugin 'christoomey/vim-tmux-navigator' # allows to navigate seamlessly between vim and tmux
set -g @plugin 'tmux-plugins/tmux-yank' # Allows synchronizing clipboards of nvim & tmux with other systems/connections.
set -g @plugin 'sainnhe/tmux-fzf' # integrates fzf with session
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'omerxx/catppuccin-tmux' # My fork that holds the meetings script bc I'm lazy af
set -g @plugin 'jeffnguyen695/tmux-zoxide-session' # Use Zoxide fro session management

set -g @floax-width '80%'
set -g @floax-height '80%'
set -g @floax-border-color 'magenta'
set -g @floax-text-color 'blue'
set -g @floax-bind 'p'
set -g @floax-change-path 'true'
set -g @sessionx-bind-zo-new-window 'ctrl-y'
set -g @sessionx-auto-accept 'off'
# set -g @sessionx-custom-paths '/Users/omerxx/dotfiles'
set -g @sessionx-bind 'o'
# set -g @sessionx-x-path '~/dotfiles'
set -g @sessionx-window-height '85%'
set -g @sessionx-window-width '75%'
set -g @sessionx-zoxide-mode 'on'
set -g @sessionx-custom-paths-subdirectories 'false'
set -g @sessionx-filter-current 'false'
set -g @continuum-restore 'on'
set -g @resurrect-strategy-nvim 'session'
set -g @catppuccin_window_left_separator ""
set -g @catppuccin_window_right_separator " "
set -g @catppuccin_window_middle_separator " █"
set -g @catppuccin_window_number_position "right"
set -g @catppuccin_window_default_fill "number"
set -g @catppuccin_window_default_text "#W"
set -g @catppuccin_window_current_fill "number"
set -g @catppuccin_window_current_text "#W#{?window_zoomed_flag,(),}"
set -g @catppuccin_status_modules_right "directory date_time"
set -g @catppuccin_status_modules_left "session"
set -g @catppuccin_status_left_separator  " "
set -g @catppuccin_status_right_separator " "
set -g @catppuccin_status_right_separator_inverse "no"
set -g @catppuccin_status_fill "icon"
set -g @catppuccin_status_connect_separator "no"
set -g @catppuccin_directory_text "#{b:pane_current_path}"
# set -g @catppuccin_meetings_text "#($HOME/.config/tmux/scripts/cal.sh)"
set -g @catppuccin_date_time_text "%H:%M"


# References
# https://github.com/omerxx/tmux-floax
# https://github.com/jimeh/tmuxifier
# https://github.com/omerxx/tmux-sessionx
# https://github.com/christoomey/vim-tmux-navigator
# https://github.com/tmux-plugins/tmux-yank
# https://github.com/tmux-plugins/tmux-continuum
# https://github.com/tmux-plugins/tmux-resurrect
# https://github.com/tmux-plugins/tmux-sensible
# https://github.com/janoamaral/tokyo-night-tmux


#---------------------------------------------------------------------
# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
#---------------------------------------------------------------------
run '~/.config/tmux/plugins/tpm/tpm'
